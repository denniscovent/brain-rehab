<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#A8C5DA">
    <title>Unrot Your Brain</title>
    <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;Brain Rehab&quot;,&quot;short_name&quot;:&quot;BrainRehab&quot;,&quot;start_url&quot;:&quot;.&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;%23A8C5DA&quot;,&quot;theme_color&quot;:&quot;%23A8C5DA&quot;}">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-primary: #A8C5DA;
            --bg-secondary: #B8D1E3;
            --bg-card: #FFFFFF;
            --bg-card-hover: #F8FAFC;
            --accent-black: #1A1A1A;
            --accent-pink: #F5B8D1;
            --accent-magenta: #E879B9;
            --accent-orange: #F6A661;
            --accent-blue: #6B9FD4;
            --accent-mint: #7DD3C0;
            --text-primary: #1A1A1A;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            --success: #22C55E;
            --warning: #F59E0B;
            --border-light: rgba(0, 0, 0, 0.06);
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 100px;
        }

        /* Header */
        .header {
            background: var(--bg-primary);
            padding: 16px 20px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .greeting {
            display: flex;
            flex-direction: column;
        }

        .greeting-text {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .greeting-subtitle {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .header-right {
            position: relative;
        }

        .notification-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--bg-card);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
        }

        .notification-btn i {
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .notification-dot {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            background: var(--accent-orange);
            border-radius: 50%;
        }

        /* Search Bar */
        .search-container {
            padding: 0 20px 16px;
        }

        .search-bar {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 14px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-sm);
        }

        .search-bar i {
            font-size: 1.2rem;
            color: var(--text-muted);
        }

        .search-bar input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 0.95rem;
            color: var(--text-primary);
            background: transparent;
            font-family: inherit;
        }

        .search-bar input::placeholder {
            color: var(--text-muted);
        }

        /* Hero Card */
        .hero-card {
            margin: 0 20px 20px;
            background: var(--bg-card);
            border-radius: 24px;
            padding: 20px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .hero-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .hero-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-icon i {
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .hero-progress {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .hero-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .hero-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .hero-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: var(--accent-black);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .hero-btn:active {
            transform: scale(0.98);
        }

        .hero-illustration {
            position: absolute;
            right: 10px;
            bottom: 10px;
            width: 120px;
            height: 120px;
            opacity: 0.9;
        }

        /* Category Pills */
        .category-pills {
            display: flex;
            gap: 10px;
            padding: 0 20px 20px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .category-pills::-webkit-scrollbar {
            display: none;
        }

        .category-pill {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 18px;
            background: var(--bg-card);
            border-radius: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            box-shadow: var(--shadow-sm);
        }

        .category-pill.active {
            background: var(--accent-black);
            color: white;
        }

        .category-pill i {
            font-size: 1.1rem;
        }

        .category-pill span {
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Content */
        .content {
            padding: 0 20px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        /* Day Selector */
        .day-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            scrollbar-width: none;
            padding-bottom: 4px;
        }

        .day-selector::-webkit-scrollbar {
            display: none;
        }

        .day-btn {
            min-width: 52px;
            padding: 12px 8px;
            border: 2px solid transparent;
            background: var(--bg-card);
            color: var(--text-secondary);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .day-btn.active {
            background: var(--accent-black);
            color: white;
        }

        .day-btn.completed {
            background: linear-gradient(135deg, var(--accent-mint), var(--success));
            color: white;
            border-color: transparent;
        }

        .day-btn .day-num {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .day-btn .day-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            font-weight: 500;
            margin-top: 2px;
        }

        /* Motivation Card */
        .motivation-card {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-magenta));
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .motivation-card::before {
            content: '';
            position: absolute;
            top: -20px;
            right: -20px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .motivation-card p {
            font-size: 1rem;
            line-height: 1.6;
            font-style: italic;
            color: white;
            position: relative;
            z-index: 1;
        }

        .motivation-card .author {
            margin-top: 12px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            font-style: normal;
            font-weight: 600;
        }

        /* Task Cards */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .task-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 18px;
            border: 2px solid transparent;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .task-card.completed {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(125, 211, 192, 0.05));
        }

        .task-header {
            display: flex;
            align-items: flex-start;
            gap: 14px;
        }

        .task-checkbox {
            width: 28px;
            height: 28px;
            border: 2px solid var(--text-muted);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .task-checkbox:hover {
            border-color: var(--success);
        }

        .task-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .task-checkbox.checked::after {
            content: '';
            width: 10px;
            height: 10px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") no-repeat center;
            background-size: contain;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .task-card.completed .task-title {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .task-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .task-time {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 10px;
        }

        .task-time i {
            font-size: 0.85rem;
        }

        /* Colored Task Cards (varied) */
        .task-card:nth-child(3n+1) {
            background: linear-gradient(135deg, #FFF8F0, #FFFFFF);
        }

        .task-card:nth-child(3n+2) {
            background: linear-gradient(135deg, #F0F8FF, #FFFFFF);
        }

        .task-card:nth-child(3n) {
            background: linear-gradient(135deg, #FFF0F8, #FFFFFF);
        }

        .task-card.completed:nth-child(n) {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(125, 211, 192, 0.05));
        }

        /* Progress Section */
        .progress-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
        }

        .progress-ring-wrapper {
            position: relative;
            margin-bottom: 24px;
        }

        .progress-ring {
            width: 160px;
            height: 160px;
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
        }

        .progress-ring .bg {
            stroke: var(--bg-secondary);
        }

        .progress-ring .progress {
            stroke: url(#progressGradient);
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .progress-percent {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
        }

        .progress-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Weekly Overview */
        .weekly-overview {
            display: flex;
            justify-content: space-between;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .week-day {
            text-align: center;
            flex: 1;
        }

        .week-day .dot {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-primary);
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .week-day .dot.completed {
            background: linear-gradient(135deg, var(--accent-mint), var(--success));
            color: white;
        }

        .week-day .dot.today {
            border: 3px solid var(--accent-black);
        }

        .week-day .label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .stat-card:nth-child(1) {
            background: linear-gradient(135deg, var(--accent-pink), rgba(245, 184, 209, 0.3));
        }

        .stat-card:nth-child(2) {
            background: linear-gradient(135deg, var(--accent-orange), rgba(246, 166, 97, 0.3));
        }

        .stat-card:nth-child(3) {
            background: linear-gradient(135deg, var(--accent-blue), rgba(107, 159, 212, 0.3));
        }

        .stat-card:nth-child(4) {
            background: linear-gradient(135deg, var(--accent-mint), rgba(125, 211, 192, 0.3));
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
        }

        .stat-icon i {
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 4px;
            font-weight: 500;
        }

        /* Reset Button */
        .reset-btn {
            width: 100%;
            padding: 16px;
            background: var(--bg-card);
            border: 2px solid var(--text-muted);
            color: var(--text-secondary);
            border-radius: 16px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .reset-btn:hover {
            border-color: #EF4444;
            color: #EF4444;
        }

        /* Journal Section */
        .journal-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 24px;
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
        }

        .journal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .journal-icon {
            width: 48px;
            height: 48px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-magenta));
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .journal-icon i {
            font-size: 1.5rem;
            color: white;
        }

        .journal-date {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .journal-day {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .journal-prompt {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
            padding: 16px;
            background: var(--bg-primary);
            border-radius: 16px;
            line-height: 1.5;
        }

        .journal-textarea {
            width: 100%;
            background: var(--bg-primary);
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 16px;
            color: var(--text-primary);
            font-size: 0.95rem;
            resize: none;
            min-height: 140px;
            font-family: inherit;
            line-height: 1.6;
            transition: border-color 0.2s;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: var(--accent-magenta);
        }

        .journal-textarea::placeholder {
            color: var(--text-muted);
        }

        .save-btn {
            width: 100%;
            padding: 16px;
            background: var(--accent-black);
            border: none;
            border-radius: 16px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 16px;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .save-btn:active {
            transform: scale(0.98);
        }

        .save-btn.saved {
            background: var(--success);
        }

        /* Past Journal Entries */
        .past-entry {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-sm);
        }

        .past-entry-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .past-entry-day {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent-magenta);
        }

        .past-entry-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Ideas Section */
        .ideas-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
        }

        .ideas-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .ideas-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ideas-icon.brain {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-magenta));
        }

        .ideas-icon.book {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-mint));
        }

        .ideas-icon.hobby {
            background: linear-gradient(135deg, var(--accent-orange), #FFD93D);
        }

        .ideas-icon i {
            font-size: 1.2rem;
            color: white;
        }

        .ideas-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .idea-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .idea-item:last-child {
            border-bottom: none;
        }

        .idea-bullet {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-magenta);
            margin-top: 6px;
            flex-shrink: 0;
        }

        .idea-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-card);
            padding: 12px 20px 24px;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
            border-radius: 24px 24px 0 0;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 16px;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 16px;
        }

        .nav-item.active {
            background: var(--bg-primary);
        }

        .nav-item i {
            font-size: 1.5rem;
            color: var(--text-muted);
            transition: color 0.2s;
        }

        .nav-item.active i {
            color: var(--text-primary);
        }

        .nav-item span {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
        }

        .nav-item.active span {
            color: var(--text-primary);
        }

        /* Streak Banner */
        .streak-banner {
            background: var(--bg-card);
            margin: 0 20px 20px;
            border-radius: 20px;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
        }

        .streak-item {
            text-align: center;
            flex: 1;
        }

        .streak-item:not(:last-child) {
            border-right: 1px solid var(--border-light);
        }

        .streak-number {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
        }

        .streak-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Illustration SVG */
        .illustration {
            display: block;
            margin: 0 auto;
        }

        /* Popsy-style illustration placeholder */
        .popsy-illustration {
            width: 100%;
            max-width: 200px;
            height: auto;
        }

        /* Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Live indicator */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .live-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }

        /* Task day theme heading */
        .day-theme {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-sm);
        }

        .day-theme-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            background: linear-gradient(135deg, var(--accent-orange), #FFD93D);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .day-theme-icon i {
            font-size: 1.5rem;
            color: white;
        }

        .day-theme-text h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .day-theme-text span {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="avatar">
                <i class="ph ph-brain"></i>
            </div>
            <div class="greeting">
                <span class="greeting-text">Hello, Friend</span>
                <span class="greeting-subtitle">Level Up Your Mind</span>
            </div>
        </div>
        <div class="header-right">
            <button class="notification-btn">
                <i class="ph ph-bell"></i>
            </button>
            <div class="notification-dot"></div>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
        <div class="search-bar">
            <i class="ph ph-magnifying-glass"></i>
            <input type="text" placeholder="Search tasks, ideas...">
        </div>
    </div>

    <!-- Hero Card -->
    <div class="hero-card" id="heroCard">
        <div class="hero-card-header">
            <div class="hero-icon">
                <i class="ph ph-brain"></i>
            </div>
            <span class="hero-progress" id="heroProgress">Day 1/7</span>
        </div>
        <h2 class="hero-title">7-Day Brain Rehab</h2>
        <p class="hero-subtitle">Unrot Your Brain Challenge</p>
        <button class="hero-btn" onclick="switchToToday()">
            START NOW
            <i class="ph ph-arrow-right"></i>
        </button>
        <!-- Popsy-style illustration inline SVG -->
        <svg class="hero-illustration float-animation" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="100" cy="100" r="80" fill="#F0F4FF" opacity="0.5"/>
            <ellipse cx="100" cy="140" rx="50" ry="10" fill="#E0E7FF" opacity="0.3"/>
            <path d="M70 80C70 80 75 60 100 60C125 60 130 80 130 80" stroke="#1A1A1A" stroke-width="3" stroke-linecap="round"/>
            <circle cx="80" cy="90" r="8" fill="#1A1A1A"/>
            <circle cx="120" cy="90" r="8" fill="#1A1A1A"/>
            <circle cx="82" cy="88" r="3" fill="white"/>
            <circle cx="122" cy="88" r="3" fill="white"/>
            <path d="M90 110C90 110 100 120 110 110" stroke="#1A1A1A" stroke-width="3" stroke-linecap="round"/>
            <path d="M60 70C60 70 50 50 70 40" stroke="#F5B8D1" stroke-width="4" stroke-linecap="round"/>
            <path d="M140 70C140 70 150 50 130 40" stroke="#A8C5DA" stroke-width="4" stroke-linecap="round"/>
            <path d="M55 85L45 80M145 85L155 80" stroke="#F6A661" stroke-width="3" stroke-linecap="round"/>
            <circle cx="65" cy="55" r="5" fill="#7DD3C0"/>
            <circle cx="135" cy="55" r="5" fill="#E879B9"/>
            <rect x="85" y="45" width="30" height="8" rx="4" fill="#6B9FD4"/>
        </svg>
    </div>

    <!-- Category Pills -->
    <div class="category-pills">
        <button class="category-pill active" data-section="today">
            <i class="ph-fill ph-lightning"></i>
            <span>Today</span>
        </button>
        <button class="category-pill" data-section="progress">
            <i class="ph ph-chart-line-up"></i>
            <span>Progress</span>
        </button>
        <button class="category-pill" data-section="journal">
            <i class="ph ph-notebook"></i>
            <span>Journal</span>
        </button>
        <button class="category-pill" data-section="ideas">
            <i class="ph ph-lightbulb"></i>
            <span>Ideas</span>
        </button>
    </div>

    <!-- Main Content -->
    <div class="content">
        <!-- TODAY SECTION -->
        <div class="section active" id="today">
            <div class="day-selector" id="daySelector"></div>

            <div class="day-theme" id="dayTheme">
                <div class="day-theme-icon">
                    <i class="ph ph-rocket-launch"></i>
                </div>
                <div class="day-theme-text">
                    <h3 id="dayThemeTitle">Digital Detox Begins</h3>
                    <span>Day 1 of 7</span>
                </div>
            </div>

            <div class="motivation-card">
                <p id="dailyQuote">"Your brain isn't broken. You haven't peaked. It's still in there—that sharp, curious, wide-eyed version of you."</p>
                <div class="author">— Remember who you were</div>
            </div>

            <div class="task-list" id="taskList"></div>
        </div>

        <!-- PROGRESS SECTION -->
        <div class="section" id="progress">
            <div class="progress-container">
                <div class="progress-ring-wrapper">
                    <svg class="progress-ring" viewBox="0 0 160 160">
                        <defs>
                            <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#E879B9"/>
                                <stop offset="100%" stop-color="#7DD3C0"/>
                            </linearGradient>
                        </defs>
                        <circle class="bg" cx="80" cy="80" r="68"/>
                        <circle class="progress" id="progressCircle" cx="80" cy="80" r="68"
                            stroke-dasharray="427.3" stroke-dashoffset="427.3"/>
                    </svg>
                    <div class="progress-center">
                        <div class="progress-percent" id="progressPercent">0%</div>
                        <div class="progress-label">COMPLETE</div>
                    </div>
                </div>
            </div>

            <div class="weekly-overview" id="weeklyOverview"></div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="ph ph-device-mobile-slash"></i>
                    </div>
                    <div class="stat-value" id="phoneFreeHours">0</div>
                    <div class="stat-label">Phone-Free Hours</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="ph ph-cloud"></i>
                    </div>
                    <div class="stat-value" id="boredMinutes">0</div>
                    <div class="stat-label">Boredom Minutes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="ph ph-pencil-line"></i>
                    </div>
                    <div class="stat-value" id="wordsWritten">0</div>
                    <div class="stat-label">Words Written</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="ph ph-book-open-text"></i>
                    </div>
                    <div class="stat-value" id="pagesRead">0</div>
                    <div class="stat-label">Pages Read</div>
                </div>
            </div>

            <button class="reset-btn" onclick="resetProgress()">
                <i class="ph ph-arrow-counter-clockwise"></i>
                Reset All Progress
            </button>
        </div>

        <!-- JOURNAL SECTION -->
        <div class="section" id="journal">
            <div class="journal-card">
                <div class="journal-header">
                    <div class="journal-icon">
                        <i class="ph ph-pencil-simple"></i>
                    </div>
                    <div>
                        <div class="journal-date" id="journalDate">Day 1</div>
                        <div class="journal-day" id="journalDateFull">January 19</div>
                    </div>
                </div>
                <div class="journal-prompt" id="journalPrompt">What made you feel mentally sharp or curious today? What did you notice about your attention?</div>
                <textarea class="journal-textarea" id="journalText" placeholder="Write your thoughts here..."></textarea>
                <button class="save-btn" onclick="saveJournal()">
                    <i class="ph ph-floppy-disk"></i>
                    Save Entry
                </button>
            </div>

            <div id="pastEntries"></div>
        </div>

        <!-- IDEAS SECTION -->
        <div class="section" id="ideas">
            <div class="motivation-card" style="background: linear-gradient(135deg, var(--accent-blue), var(--accent-mint));">
                <p>Pick something that fascinates you. Not for grades or productivity—just for the thrill of learning.</p>
            </div>

            <div class="ideas-card">
                <div class="ideas-header">
                    <div class="ideas-icon brain">
                        <i class="ph ph-target"></i>
                    </div>
                    <h3 class="ideas-title">Brain Exercise Ideas</h3>
                </div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Listen to a philosophy podcast while walking</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Rewatch a childhood movie and analyze it</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Learn a new word and use it in a sentence</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Handwrite a letter to someone (or yourself)</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Memorize a poem</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Learn the capitals of every country</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Create a mini book club with one friend</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Pick a side in a debate—then argue the opposite</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Rewrite a fairytale from a villain's POV</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Read the footnotes of a nonfiction book</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Watch a TED Talk and summarize it in your words</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Take a walk without your phone—just walk</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Do something manually without media</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Write down 10 questions you don't know the answer to</div></div>
                <div class="idea-item"><div class="idea-bullet"></div><div class="idea-text">Make something that won't be posted anywhere</div></div>
            </div>

            <div class="ideas-card">
                <div class="ideas-header">
                    <div class="ideas-icon book">
                        <i class="ph ph-books"></i>
                    </div>
                    <h3 class="ideas-title">Reading Challenge</h3>
                </div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-blue);"></div><div class="idea-text">One fiction book</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-blue);"></div><div class="idea-text">One nonfiction book</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-blue);"></div><div class="idea-text">One re-read (a favorite)</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-blue);"></div><div class="idea-text">One wildcard (random pick)</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-blue);"></div><div class="idea-text">One deep-dive into something niche</div></div>
            </div>

            <div class="ideas-card">
                <div class="ideas-header">
                    <div class="ideas-icon hobby">
                        <i class="ph ph-palette"></i>
                    </div>
                    <h3 class="ideas-title">Focus Hobbies to Try</h3>
                </div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Learn a language (Duolingo, books)</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Play an instrument</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Knit or crochet something</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Start a small garden</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Build something with your hands</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Cook without a recipe</div></div>
                <div class="idea-item"><div class="idea-bullet" style="background: var(--accent-orange);"></div><div class="idea-text">Sketch or paint</div></div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-section="today">
            <i class="ph-fill ph-house"></i>
            <span>Home</span>
        </button>
        <button class="nav-item" data-section="progress">
            <i class="ph ph-chart-pie-slice"></i>
            <span>Progress</span>
        </button>
        <button class="nav-item" data-section="journal">
            <i class="ph ph-note-pencil"></i>
            <span>Journal</span>
        </button>
        <button class="nav-item" data-section="ideas">
            <i class="ph ph-lightbulb-filament"></i>
            <span>Ideas</span>
        </button>
    </nav>

    <!-- Streak Banner (positioned after search in DOM but shown conditionally) -->
    <div class="streak-banner" id="streakBanner" style="display: none;">
        <div class="streak-item">
            <div class="streak-number" id="currentStreak">0</div>
            <div class="streak-label">Day Streak</div>
        </div>
        <div class="streak-item">
            <div class="streak-number" id="tasksToday">0/5</div>
            <div class="streak-label">Today's Tasks</div>
        </div>
        <div class="streak-item">
            <div class="streak-number" id="totalCompleted">0</div>
            <div class="streak-label">Total Done</div>
        </div>
    </div>

    <script>
        // Data structure
        const dailyTasks = [
            { // Day 1
                theme: "Digital Detox Begins",
                icon: "device-mobile-slash",
                quote: "Step away from the infinite scroll. Let your brain remember how to think without being spoon-fed.",
                tasks: [
                    { id: 'd1t1', title: "3-Hour Phone Fast", desc: "No phone for 3 consecutive hours. Put it in another room.", time: "3 hrs" },
                    { id: 'd1t2', title: "10 Minutes of Boredom", desc: "Sit with no stimulation. Stare out a window. Just exist.", time: "10 min" },
                    { id: 'd1t3', title: "Brain Dump Writing", desc: "Open notes app or paper. Write whatever comes to mind for 10 minutes.", time: "10 min" },
                    { id: 'd1t4', title: "Delete One App", desc: "Remove one social media app from your phone. Just for this week.", time: "2 min" },
                    { id: 'd1t5', title: "Evening Reflection", desc: "Write 3 sentences about how your attention felt today.", time: "5 min" }
                ],
                prompt: "What made you reach for your phone today? How did it feel to resist?"
            },
            { // Day 2
                theme: "Embrace the Stillness",
                icon: "moon-stars",
                quote: "You don't need to be entertained every second. Let yourself sit in silence.",
                tasks: [
                    { id: 'd2t1', title: "Morning Without Phone", desc: "First hour of your day: no phone. Make coffee, stretch, just be.", time: "1 hr" },
                    { id: 'd2t2', title: "15-Min Boredom Session", desc: "Navy SEAL nap or just stare at the ceiling. Feel the discomfort.", time: "15 min" },
                    { id: 'd2t3', title: "Write Your Thoughts", desc: "Freewrite for 15 minutes. Follow tangents. Let it be messy.", time: "15 min" },
                    { id: 'd2t4', title: "Walk Without Phone", desc: "Take a 20-minute walk. No music. No podcasts. Just your thoughts.", time: "20 min" },
                    { id: 'd2t5', title: "Read 10 Pages", desc: "Physical book if possible. No e-reader notifications.", time: "20 min" }
                ],
                prompt: "What thoughts came up during your boredom sessions? Were any surprising?"
            },
            { // Day 3
                theme: "Rediscover Curiosity",
                icon: "magnifying-glass",
                quote: "Pick a topic. Become obsessed. Just for the thrill of it.",
                tasks: [
                    { id: 'd3t1', title: "Choose Your Fascination", desc: "Pick ONE topic you want to deep-dive into this week. Write it down.", time: "10 min" },
                    { id: 'd3t2', title: "Research Session", desc: "Spend 30 minutes learning about your topic. Take notes by hand.", time: "30 min" },
                    { id: 'd3t3', title: "4-Hour Phone Limit", desc: "Only use phone for 4 total hours today (track with Screen Time).", time: "All day" },
                    { id: 'd3t4', title: "Boredom Practice", desc: "Another 15 minutes of doing nothing. It gets easier.", time: "15 min" },
                    { id: 'd3t5', title: "Write About Learning", desc: "What did you discover? What questions do you still have?", time: "10 min" }
                ],
                prompt: "What topic did you choose? What drew you to it? What surprised you in your research?"
            },
            { // Day 4
                theme: "Reading Resurrection",
                icon: "book-open",
                quote: "Read like a kid again—greedy, curious, unselfconscious.",
                tasks: [
                    { id: 'd4t1', title: "Library Trip or Book Hunt", desc: "Go to a library or find that book you've been meaning to read.", time: "30 min" },
                    { id: 'd4t2', title: "Read for 30 Minutes", desc: "Uninterrupted. Phone in another room. Highlight if you want.", time: "30 min" },
                    { id: 'd4t3', title: "No Phone First 2 Hours", desc: "Morning routine without phone. Journal, read, stretch.", time: "2 hrs" },
                    { id: 'd4t4', title: "Continue Research", desc: "Another session on your fascination topic. Go deeper.", time: "20 min" },
                    { id: 'd4t5', title: "Handwrite Something", desc: "A letter, a poem, a summary of what you read. Feel the pen.", time: "15 min" }
                ],
                prompt: "What are you reading? How does it feel to hold a physical book again?"
            },
            { // Day 5
                theme: "Hands & Focus",
                icon: "hand-grabbing",
                quote: "Give your brain something real to touch. Something with friction. With error.",
                tasks: [
                    { id: 'd5t1', title: "Start a Hands-On Project", desc: "Cooking, knitting, building, drawing—something tactile.", time: "30 min" },
                    { id: 'd5t2', title: "Read 20+ Pages", desc: "Keep that reading momentum going.", time: "30 min" },
                    { id: 'd5t3', title: "Deep Research Session", desc: "Make notes, outline what you're learning. Create a mini-thesis.", time: "45 min" },
                    { id: 'd5t4', title: "Task Without Media", desc: "Fold laundry, cook, clean—without any audio or video.", time: "20 min" },
                    { id: 'd5t5', title: "Evening Writing", desc: "Write about what you've learned or experienced this week.", time: "15 min" }
                ],
                prompt: "What did you create or work on with your hands? How did focused manual work feel?"
            },
            { // Day 6
                theme: "Mental Play",
                icon: "puzzle-piece",
                quote: "Sit with a question, really sit with it, without reaching for a distraction.",
                tasks: [
                    { id: 'd6t1', title: "Big Question Session", desc: "Write down 5 questions you don't know the answer to. Sit with them.", time: "20 min" },
                    { id: 'd6t2', title: "Debate Yourself", desc: "Pick a topic. Argue one side, then the opposite. Out loud or written.", time: "20 min" },
                    { id: 'd6t3', title: "Read 30+ Pages", desc: "You're building the muscle. Keep going.", time: "40 min" },
                    { id: 'd6t4', title: "Finalize Your Research", desc: "Start writing your mini-paper or summary. Structure your thoughts.", time: "45 min" },
                    { id: 'd6t5', title: "Phone-Free Evening", desc: "From 7pm onward: no phone. Just you, books, thoughts.", time: "3+ hrs" }
                ],
                prompt: "What big questions are on your mind? What's one thing you've changed your mind about this week?"
            },
            { // Day 7
                theme: "Reclaim Your Mind",
                icon: "trophy",
                quote: "Your brain is still yours. Unrot it. Reclaim it. Wake it back up.",
                tasks: [
                    { id: 'd7t1', title: "Complete Your Project", desc: "Finish your mini-paper, craft project, or whatever you started.", time: "45 min" },
                    { id: 'd7t2', title: "Finish Your Book (or 50+ pages)", desc: "Push through. You can do this.", time: "1 hr" },
                    { id: 'd7t3', title: "Full Day Mindful Phone Use", desc: "Be intentional with every unlock. Ask: do I need this?", time: "All day" },
                    { id: 'd7t4', title: "Celebrate & Reflect", desc: "Write about your week. What changed? What will you continue?", time: "20 min" },
                    { id: 'd7t5', title: "Plan Week 2", desc: "What habits will you keep? What new challenges will you take on?", time: "15 min" }
                ],
                prompt: "How do you feel compared to 7 days ago? What version of yourself showed up this week?"
            }
        ];

        // State
        let state = {
            currentDay: 1,
            completedTasks: {},
            journals: {},
            stats: {
                phoneFreeHours: 0,
                boredMinutes: 0,
                wordsWritten: 0,
                pagesRead: 0
            },
            startDate: null
        };

        // Load from localStorage
        function loadState() {
            const saved = localStorage.getItem('brainRehabState');
            if (saved) {
                state = JSON.parse(saved);
            } else {
                state.startDate = new Date().toISOString();
            }
        }

        // Save to localStorage
        function saveState() {
            localStorage.setItem('brainRehabState', JSON.stringify(state));
        }

        // Initialize
        function init() {
            loadState();
            renderDaySelector();
            renderTasks();
            renderProgress();
            renderWeeklyOverview();
            renderJournal();
            updateStats();
            setupNavigation();
            updateHeroCard();
        }

        // Switch to Today section
        function switchToToday() {
            document.querySelectorAll('.category-pill, .nav-item').forEach(el => {
                el.classList.toggle('active', el.dataset.section === 'today');
            });
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('today').classList.add('active');
        }

        // Update Hero Card
        function updateHeroCard() {
            document.getElementById('heroProgress').textContent = `Day ${state.currentDay}/7`;
        }

        // Navigation
        function setupNavigation() {
            const allNavItems = document.querySelectorAll('.category-pill, .nav-item');

            allNavItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Update both pill and bottom nav active states
                    document.querySelectorAll('.category-pill').forEach(p => p.classList.remove('active'));
                    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

                    // Find matching elements and activate them
                    const section = item.dataset.section;
                    document.querySelectorAll(`[data-section="${section}"]`).forEach(el => {
                        el.classList.add('active');
                    });

                    // Show the section
                    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                    document.getElementById(section).classList.add('active');

                    // Update bottom nav icons
                    document.querySelectorAll('.nav-item').forEach(nav => {
                        const icon = nav.querySelector('i');
                        if (nav.dataset.section === section) {
                            icon.className = icon.className.replace('ph ph-', 'ph-fill ph-');
                        } else {
                            icon.className = icon.className.replace('ph-fill ph-', 'ph ph-');
                        }
                    });
                });
            });
        }

        // Render day selector
        function renderDaySelector() {
            const container = document.getElementById('daySelector');
            container.innerHTML = '';

            for (let i = 1; i <= 7; i++) {
                const dayCompleted = isDayCompleted(i);
                const btn = document.createElement('button');
                btn.className = `day-btn ${i === state.currentDay ? 'active' : ''} ${dayCompleted ? 'completed' : ''}`;
                btn.innerHTML = `
                    <div class="day-num">${i}</div>
                    <div class="day-label">Day</div>
                `;
                btn.onclick = () => selectDay(i);
                container.appendChild(btn);
            }
        }

        // Check if day is completed
        function isDayCompleted(day) {
            const dayTasks = dailyTasks[day - 1].tasks;
            return dayTasks.every(task => state.completedTasks[task.id]);
        }

        // Select day
        function selectDay(day) {
            state.currentDay = day;
            saveState();
            renderDaySelector();
            renderTasks();
            renderJournal();
            updateHeroCard();
        }

        // Render tasks
        function renderTasks() {
            const dayData = dailyTasks[state.currentDay - 1];
            document.getElementById('dailyQuote').textContent = `"${dayData.quote}"`;

            // Update day theme
            document.getElementById('dayThemeTitle').textContent = dayData.theme;
            document.querySelector('.day-theme-text span').textContent = `Day ${state.currentDay} of 7`;
            document.querySelector('.day-theme-icon i').className = `ph ph-${dayData.icon}`;

            const container = document.getElementById('taskList');
            container.innerHTML = '';

            dayData.tasks.forEach(task => {
                const completed = state.completedTasks[task.id];
                const card = document.createElement('div');
                card.className = `task-card ${completed ? 'completed' : ''}`;
                card.innerHTML = `
                    <div class="task-header">
                        <div class="task-checkbox ${completed ? 'checked' : ''}" onclick="toggleTask('${task.id}')"></div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                            <div class="task-desc">${task.desc}</div>
                            <span class="task-time">
                                <i class="ph ph-clock"></i>
                                ${task.time}
                            </span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });

            updateTodayStats();
        }

        // Toggle task
        function toggleTask(taskId) {
            state.completedTasks[taskId] = !state.completedTasks[taskId];
            saveState();
            renderTasks();
            renderDaySelector();
            renderProgress();
            renderWeeklyOverview();
            updateStats();
        }

        // Update today's stats in header
        function updateTodayStats() {
            const dayTasks = dailyTasks[state.currentDay - 1].tasks;
            const completed = dayTasks.filter(t => state.completedTasks[t.id]).length;
            document.getElementById('tasksToday').textContent = `${completed}/${dayTasks.length}`;

            // Calculate streak
            let streak = 0;
            for (let i = state.currentDay; i >= 1; i--) {
                if (isDayCompleted(i)) streak++;
                else break;
            }
            document.getElementById('currentStreak').textContent = streak;

            // Total completed
            const total = Object.values(state.completedTasks).filter(v => v).length;
            document.getElementById('totalCompleted').textContent = total;
        }

        // Render progress
        function renderProgress() {
            const totalTasks = dailyTasks.reduce((sum, day) => sum + day.tasks.length, 0);
            const completed = Object.values(state.completedTasks).filter(v => v).length;
            const percent = Math.round((completed / totalTasks) * 100);

            const circumference = 2 * Math.PI * 68;
            const offset = circumference - (percent / 100) * circumference;

            document.getElementById('progressCircle').style.strokeDashoffset = offset;
            document.getElementById('progressPercent').textContent = `${percent}%`;
        }

        // Render weekly overview
        function renderWeeklyOverview() {
            const container = document.getElementById('weeklyOverview');
            container.innerHTML = '';

            const dayLabels = ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7'];

            for (let i = 1; i <= 7; i++) {
                const completed = isDayCompleted(i);
                const isToday = i === state.currentDay;

                const div = document.createElement('div');
                div.className = 'week-day';
                div.innerHTML = `
                    <div class="dot ${completed ? 'completed' : ''} ${isToday ? 'today' : ''}">${completed ? '<i class="ph-bold ph-check" style="font-size: 14px;"></i>' : i}</div>
                    <div class="label">${dayLabels[i-1]}</div>
                `;
                container.appendChild(div);
            }
        }

        // Update stats display
        function updateStats() {
            document.getElementById('phoneFreeHours').textContent = state.stats.phoneFreeHours;
            document.getElementById('boredMinutes').textContent = state.stats.boredMinutes;
            document.getElementById('wordsWritten').textContent = state.stats.wordsWritten;
            document.getElementById('pagesRead').textContent = state.stats.pagesRead;
        }

        // Render journal
        function renderJournal() {
            const dayData = dailyTasks[state.currentDay - 1];
            const date = new Date();
            date.setDate(date.getDate() + state.currentDay - 1);

            document.getElementById('journalDate').textContent = `Day ${state.currentDay}`;
            document.getElementById('journalDateFull').textContent = date.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });
            document.getElementById('journalPrompt').textContent = dayData.prompt;
            document.getElementById('journalText').value = state.journals[state.currentDay] || '';

            // Render past entries
            const pastContainer = document.getElementById('pastEntries');
            pastContainer.innerHTML = '';

            Object.keys(state.journals).sort((a, b) => b - a).forEach(day => {
                if (parseInt(day) !== state.currentDay && state.journals[day]) {
                    const entry = document.createElement('div');
                    entry.className = 'past-entry';
                    entry.innerHTML = `
                        <div class="past-entry-header">
                            <i class="ph ph-calendar-blank" style="color: var(--accent-magenta);"></i>
                            <span class="past-entry-day">Day ${day}</span>
                        </div>
                        <p class="past-entry-text">${state.journals[day]}</p>
                    `;
                    pastContainer.appendChild(entry);
                }
            });
        }

        // Save journal
        function saveJournal() {
            const text = document.getElementById('journalText').value;
            state.journals[state.currentDay] = text;

            // Update word count
            const totalWords = Object.values(state.journals).join(' ').split(/\s+/).filter(w => w).length;
            state.stats.wordsWritten = totalWords;

            saveState();
            updateStats();
            renderJournal();

            // Visual feedback
            const btn = document.querySelector('.save-btn');
            btn.innerHTML = '<i class="ph ph-check-circle"></i> Saved!';
            btn.classList.add('saved');
            setTimeout(() => {
                btn.innerHTML = '<i class="ph ph-floppy-disk"></i> Save Entry';
                btn.classList.remove('saved');
            }, 1500);
        }

        // Reset progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                localStorage.removeItem('brainRehabState');
                state = {
                    currentDay: 1,
                    completedTasks: {},
                    journals: {},
                    stats: {
                        phoneFreeHours: 0,
                        boredMinutes: 0,
                        wordsWritten: 0,
                        pagesRead: 0
                    },
                    startDate: new Date().toISOString()
                };
                saveState();
                init();
            }
        }

        // Start app
        init();
    </script>
</body>
</html>
